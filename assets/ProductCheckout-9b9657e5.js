import{u as T,d as A,j as e,S as I,b as O,C as d,e as o,c as m,a as x,B as h,I as n,h as D,i as R,k as F,l as B,F as L,m as U}from"./index-ef523bc6.js";import{r as C}from"./vendor-react-79a2b980.js";import{T as V}from"./textarea-800001de.js";import{b as Y}from"./vendor-router-2e3f95c9.js";import{S as z,P as k,G as H,n as $,O as G,L as J,d as Q}from"./vendor-ui-a51f4cb7.js";function se(){const i=Y(),{clearCart:S,getCartSummary:w,getProducts:P,formatPrice:c,updateQuantity:p}=T(),{error:b}=A(),{isEmpty:q,productsSubtotal:j,tax:g,total:f}=w(),u=P(),[a,l]=C.useState({name:"",email:"",phone:"",address:"",city:"",postalCode:"",paymentMethod:"",specialRequests:""}),[N,v]=C.useState(!1);if(q)return i("/services",{state:{message:"Your cart is empty. Browse our products to get started."}}),null;if(u.length===0)return i("/booking",{state:{message:"You have services in your cart. Please complete the booking process."}}),null;const E=async s=>{if(s.preventDefault(),!a.name||!a.email||!a.phone||!a.address||!a.paymentMethod){b("Missing information","Please fill in all required fields");return}v(!0);try{await new Promise(r=>setTimeout(r,2e3));const t=Date.now().toString(36).toUpperCase(),M=Math.random().toString(36).substring(2,6).toUpperCase(),y={confirmationCode:`ESP-${t}-${M}`,services:[],products:u.map(r=>({id:r.id,name:r.name,price:r.price,quantity:r.quantity,description:r.description})),customer:{name:a.name,email:a.email,phone:a.phone,paymentMethod:a.paymentMethod,specialRequests:a.address},totals:{servicesSubtotal:0,productsSubtotal:j,tax:g,total:f},createdAt:new Date().toISOString()};localStorage.setItem("demo-booking",JSON.stringify(y)),S(),i("/booking-confirmation",{state:{bookingData:y}})}catch{b("Order failed","An unexpected error occurred")}finally{v(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 to-neutral-100",children:e.jsx(I,{background:"white",className:"py-16",children:e.jsx(O,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-6",children:e.jsx(z,{className:"h-8 w-8 text-green-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-brand-dark mb-4",children:"Checkout"}),e.jsx("p",{className:"text-xl text-neutral-600 max-w-2xl mx-auto",children:"Complete your product purchase"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(d,{className:"sticky top-8",children:[e.jsx(o,{children:e.jsxs(m,{className:"text-xl font-semibold text-brand-dark flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-green-600"}),"Order Summary"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:u.map(s=>e.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 pb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-brand-dark",children:s.name}),e.jsx("p",{className:"text-sm text-neutral-600",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(h,{type:"button",variant:"outline",size:"sm",onClick:()=>p(s.id,s.quantity-1),className:"h-6 w-6 p-0",children:"-"}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:s.quantity}),e.jsx(h,{type:"button",variant:"outline",size:"sm",onClick:()=>p(s.id,s.quantity+1),className:"h-6 w-6 p-0",children:"+"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-semibold text-brand-dark",children:c(s.price*s.quantity)})})]},s.id))}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-neutral-200",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:c(j)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Tax (12% VAT)"}),e.jsx("span",{className:"font-medium",children:c(g)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-neutral-200 pt-2",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-brand-primary",children:c(f)})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:E,className:"space-y-8",children:[e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs(m,{className:"text-xl font-semibold text-brand-dark flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"Full Name *"}),e.jsx(n,{value:a.name,onChange:s=>l(t=>({...t,name:s.target.value})),placeholder:"Enter your full name",className:"focus-ring"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"Email Address *"}),e.jsx(n,{type:"email",value:a.email,onChange:s=>l(t=>({...t,email:s.target.value})),placeholder:"Enter your email",className:"focus-ring"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"Phone Number *"}),e.jsx(n,{value:a.phone,onChange:s=>l(t=>({...t,phone:s.target.value})),placeholder:"Enter your phone number",className:"focus-ring"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"Payment Method *"}),e.jsxs(D,{value:a.paymentMethod,onValueChange:s=>l(t=>({...t,paymentMethod:s})),children:[e.jsx(R,{className:"focus-ring",children:e.jsx(F,{placeholder:"Select payment method"})}),e.jsx(B,{children:L.map(s=>e.jsx(U,{value:s.value,children:s.label},s.value))})]})]})]})})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs(m,{className:"text-xl font-semibold text-brand-dark flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-green-600"}),"Shipping Address"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"Address *"}),e.jsx(n,{value:a.address,onChange:s=>l(t=>({...t,address:s.target.value})),placeholder:"Enter your address",className:"focus-ring"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"City *"}),e.jsx(n,{value:a.city,onChange:s=>l(t=>({...t,city:s.target.value})),placeholder:"Enter your city",className:"focus-ring"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"Postal Code"}),e.jsx(n,{value:a.postalCode,onChange:s=>l(t=>({...t,postalCode:s.target.value})),placeholder:"Enter postal code",className:"focus-ring"})]})]})]})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs(m,{className:"text-xl font-semibold text-brand-dark flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-purple-600"}),"Additional Information"]})}),e.jsx(x,{children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-brand-dark mb-2",children:"Special Requests"}),e.jsx(V,{value:a.specialRequests,onChange:s=>l(t=>({...t,specialRequests:s.target.value})),placeholder:"Any special instructions or requests...",className:"focus-ring",rows:3})]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(h,{type:"button",variant:"outline",onClick:()=>i("/services"),className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Continue Shopping"]}),e.jsx(h,{type:"submit",disabled:N,className:"bg-brand-primary text-white hover:bg-brand-primary/90 font-semibold px-8 py-3 flex items-center gap-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-5 w-5 animate-spin"}),"Processing Order..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-5 w-5"}),"Complete Order"]})})]})]})})]})]})})})})}export{se as ProductCheckout};
